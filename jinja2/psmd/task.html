{% extends "psmd/base.html" %}

{% block main %}
{% set colors = {0: 'secondary', 1: 'primary', 2: 'success', 3: 'danger'} %}
{% set types = {'ssr': 'perferct microsatellite', 'cssr': 'compound microsatellite', 'issr': 'imperfect microsatellite'} %}
<div class="row mt-5">
	<div class="col">
		<h4>Your task ID <span class="badge badge-info mr-5">{{ task.job_id }}</span> Status <span class="badge badge-{{ colors[task.status] }}">{{ task.get_status_display() }}</span></h4>
		<dl class="row mt-4">
			<dt class="col-md-1">Input</dt>
			<dd class="col-md-11">{{ task.fasta|safe }}</dd>
			<dt class="col-md-1">SSR Type</dt>
			<dd class="col-md-11">{{ types[task.mode] }}</dd>
			<dt class="col-md-1">Parameters</dt>
			<dd class="col-md-11">{{ task.parameter|safe }}</dd>
		</dl>
		<div class="progress mt-4">
			<div class="bg-{{ colors[task.status] }} progress-bar progress-bar-striped {% if task.status < 2 %}progress-bar-animated{% endif %}" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
		</div>
	</div>
</div>

{% if task.status == 2 %}
{% if task.mode == 'ssr' %}
{% include('psmd/ssr.html') %}
{% elif task.mode == 'cssr' %}
{% include('psmd/cssr.html') %}
{% elif task.mode == 'issr' %}
{% include('psmd/issr.html') %}
{% endif %}
{% else %}
<div class="row mt-5">
	<div class="col"><strong>Error message:</strong> {{ task.message }}</div>
</div>
{% endif %}

{% endblock %}